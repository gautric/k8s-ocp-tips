# ocp-tips



## Openshift Registry URL


#### Open the route footnote:nca[need clusteradmin role]
  oc patch configs.imageregistry.operator.openshift.io/cluster --patch '{"spec":{"defaultRoute":true}}' --type=merge

#### Retrieve the route
  oc get route default-route -n openshift-image-registry --template='{{.spec.host }}'

  REGISTRY_ROUTE=$(oc get route default-route -n openshift-image-registry --template='{{.spec.host }}')

#### Login with docker/podman CLI

  podman login -u $(oc whoami) -p $(oc whoami -t) --tls-verify=false ${REGISTRY_ROUTE}

  docker login -u $(oc whoami) -p $(oc whoami -t) ${REGISTRY_ROUTE}
  
#### Tag Image locally
  
  docker tag ${IMAGE_NAME}:latest ${IMAGE_NAME}:${IMAGE_VERSION}

  docker tag ${IMAGE_NAME}:${IMAGE_VERSION} ${REGISTRY_ROUTE}/${NAMESPACE}/${IMAGE_NAME}:${IMAGE_VERSION}

#### Push to Openshift Registry

  docker push ${REGISTRY_ROUTE}/${NAMESPACE}/${IMAGE_NAME}:${IMAGE_VERSION}


### ServiceAccount role


#### Add admin Role to SA

  oc adm policy add-role-to-user admin system:serviceaccount:${NAMESPACE}:default  -n ${NAMESPACE}
  
### Operator

#### View Operator

  oc get packagemanifests -n openshift-marketplace
    
### Logs    
    
  oc logs -f ${Pod}

### Build

	oc start-build ${BuildConfig}  --follow
	
### Secret  
  
	oc get secret/${Secret} -o json | jq '.data["tls.crt"]' -r | base64 -d

### Delete

	oc delete all,configmap,pvc,serviceaccount,rolebinding,dc,bc --selector app=${MYAPP}
